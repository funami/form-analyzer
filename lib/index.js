"use strict";(()=>{var dt=Object.create;var q=Object.defineProperty;var mt=Object.getOwnPropertyDescriptor;var ht=Object.getOwnPropertyNames,pe=Object.getOwnPropertySymbols,gt=Object.getPrototypeOf,me=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable;var de=(e,t,r)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,F=(e,t)=>{for(var r in t||(t={}))me.call(t,r)&&de(e,r,t[r]);if(pe)for(var r of pe(t))vt.call(t,r)&&de(e,r,t[r]);return e};var O=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Et=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of ht(t))!me.call(e,o)&&o!==r&&q(e,o,{get:()=>t[o],enumerable:!(n=mt(t,o))||n.enumerable});return e};var he=(e,t,r)=>(r=e!=null?dt(gt(e)):{},Et(t||!e||!e.__esModule?q(r,"default",{value:e,enumerable:!0}):r,e));var E=(e,t,r)=>new Promise((n,o)=>{var i=c=>{try{a(r.next(c))}catch(f){o(f)}},s=c=>{try{a(r.throw(c))}catch(f){o(f)}},a=c=>c.done?n(c.value):Promise.resolve(c.value).then(i,s);a((r=r.apply(e,t)).next())});var ve=O((Or,ge)=>{"use strict";var S={};function St(e){return e in S?S[e]:null}function xt(e,t){return S[e]=t,!0}function bt(e){var t=e in S;return t?delete S[e]:!1}function yt(){return S={},!0}ge.exports={getItem:St,setItem:xt,removeItem:bt,clear:yt}});var U=O((Ar,Ee)=>{"use strict";function Tt(e){let t=wt(e);return t===void 0?null:t}function wt(e){try{return JSON.parse(e)}catch{return e}}Ee.exports=Tt});var be=O((Nr,xe)=>{"use strict";var Se=U(),x={},Lt=!1;function _t(){global.addEventListener?global.addEventListener("storage",B,!1):global.attachEvent?global.attachEvent("onstorage",B):global.onstorage=B}function B(e){e||(e=global.event);var t=x[e.key];t&&t.forEach(r);function r(n){n(Se(e.newValue),Se(e.oldValue),e.url||e.uri)}}function Ot(e,t){x[e]?x[e].push(t):x[e]=[t],Lt===!1&&_t()}function At(e,t){var r=x[e];r.length>1?r.splice(r.indexOf(t),1):x[e]=[]}xe.exports={on:Ot,off:At}});var _e=O((Ir,Le)=>{"use strict";var Nt=ve(),It=U(),ye=be(),b="localStorage"in global&&global.localStorage?global.localStorage:Nt;function g(e,t){return arguments.length===1?Te(e):we(e,t)}function Te(e){let t=b.getItem(e);return It(t)}function we(e,t){try{return b.setItem(e,JSON.stringify(t)),!0}catch{return!1}}function Ct(e){return b.removeItem(e)}function Pt(){return b.clear()}function Rt(e){return e&&(b=e),b}g.set=we;g.get=Te;g.remove=Ct;g.clear=Pt;g.backend=Rt;g.on=ye.on;g.off=ye.off;Le.exports=g});var We=O((Cr,G)=>{"use strict";var y=typeof Reflect=="object"?Reflect:null,Oe=y&&typeof y.apply=="function"?y.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},D;y&&typeof y.ownKeys=="function"?D=y.ownKeys:Object.getOwnPropertySymbols?D=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:D=function(t){return Object.getOwnPropertyNames(t)};function Ft(e){console&&console.warn&&console.warn(e)}var Ne=Number.isNaN||function(t){return t!==t};function l(){l.init.call(this)}G.exports=l;G.exports.once=Ht;l.EventEmitter=l;l.prototype._events=void 0;l.prototype._eventsCount=0;l.prototype._maxListeners=void 0;var Ae=10;function M(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return Ae},set:function(e){if(typeof e!="number"||e<0||Ne(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Ae=e}});l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};l.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Ne(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Ie(e){return e._maxListeners===void 0?l.defaultMaxListeners:e._maxListeners}l.prototype.getMaxListeners=function(){return Ie(this)};l.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var o=t==="error",i=this._events;if(i!==void 0)o=o&&i.error===void 0;else if(!o)return!1;if(o){var s;if(r.length>0&&(s=r[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=i[t];if(c===void 0)return!1;if(typeof c=="function")Oe(c,this,r);else for(var f=c.length,h=De(c,f),n=0;n<f;++n)Oe(h[n],this,r);return!0};function Ce(e,t,r,n){var o,i,s;if(M(r),i=e._events,i===void 0?(i=e._events=Object.create(null),e._eventsCount=0):(i.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),s=i[t]),s===void 0)s=i[t]=r,++e._eventsCount;else if(typeof s=="function"?s=i[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),o=Ie(e),o>0&&s.length>o&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,Ft(a)}return e}l.prototype.addListener=function(t,r){return Ce(this,t,r,!1)};l.prototype.on=l.prototype.addListener;l.prototype.prependListener=function(t,r){return Ce(this,t,r,!0)};function Dt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Pe(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=Dt.bind(n);return o.listener=r,n.wrapFn=o,o}l.prototype.once=function(t,r){return M(r),this.on(t,Pe(this,t,r)),this};l.prototype.prependOnceListener=function(t,r){return M(r),this.prependListener(t,Pe(this,t,r)),this};l.prototype.removeListener=function(t,r){var n,o,i,s,a;if(M(r),o=this._events,o===void 0)return this;if(n=o[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete o[t],o.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===r||n[s].listener===r){a=n[s].listener,i=s;break}if(i<0)return this;i===0?n.shift():Mt(n,i),n.length===1&&(o[t]=n[0]),o.removeListener!==void 0&&this.emit("removeListener",t,a||r)}return this};l.prototype.off=l.prototype.removeListener;l.prototype.removeAllListeners=function(t){var r,n,o;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var i=Object.keys(n),s;for(o=0;o<i.length;++o)s=i[o],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(o=r.length-1;o>=0;o--)this.removeListener(t,r[o]);return this};function Re(e,t,r){var n=e._events;if(n===void 0)return[];var o=n[t];return o===void 0?[]:typeof o=="function"?r?[o.listener||o]:[o]:r?Wt(o):De(o,o.length)}l.prototype.listeners=function(t){return Re(this,t,!0)};l.prototype.rawListeners=function(t){return Re(this,t,!1)};l.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Fe.call(e,t)};l.prototype.listenerCount=Fe;function Fe(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?D(this._events):[]};function De(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function Mt(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Wt(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function Ht(e,t){return new Promise(function(r,n){function o(s){e.removeListener(t,i),n(s)}function i(){typeof e.removeListener=="function"&&e.removeListener("error",o),r([].slice.call(arguments))}Me(e,t,i,{once:!0}),t!=="error"&&$t(e,o,{once:!0})})}function $t(e,t,r){typeof e.on=="function"&&Me(e,"error",t,r)}function Me(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function o(i){n.once&&e.removeEventListener(t,o),r(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}});var A=class{constructor(t){this.dataList=[];this.nextFlashIndex=0;this.flashInterval=5e3;this.flashing=!1;this.sender=t}push(t){this.dataList.push(t)}start(){this.flash(),this.tid=setInterval(()=>{this.flash()},this.flashInterval)}end(){return E(this,null,function*(){this.tid&&(clearInterval(this.tid),this.tid=void 0),yield this.flash()})}flash(){return E(this,null,function*(){if(this.flashing)throw new Error("aleady flashing");this.flashing=!0;let t=this.nextFlashIndex;if(this.nextFlashIndex!=this.dataList.length){let r=this.dataList.length,n=this.dataList.slice(t,r),o=yield this.sender.send(n);return o&&(this.nextFlashIndex=r),this.flashing=!1,o}else{this.flashing=!1;return}})}};var _=he(_e()),ct=he(We());var N=class{static formSessionStart(t){let r={event:"form_session_start",form_session_id:t.sid,form_uid:t.uid};window.dataLayer||(window.dataLayer=[]),window.dataLayer.push(r)}};var W,jt=new Uint8Array(16);function Y(){if(!W&&(W=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!W))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return W(jt)}var He=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function zt(e){return typeof e=="string"&&He.test(e)}var $e=zt;var p=[];for(H=0;H<256;++H)p.push((H+256).toString(16).substr(1));var H;function Vt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(p[e[t+0]]+p[e[t+1]]+p[e[t+2]]+p[e[t+3]]+"-"+p[e[t+4]]+p[e[t+5]]+"-"+p[e[t+6]]+p[e[t+7]]+"-"+p[e[t+8]]+p[e[t+9]]+"-"+p[e[t+10]]+p[e[t+11]]+p[e[t+12]]+p[e[t+13]]+p[e[t+14]]+p[e[t+15]]).toLowerCase();if(!$e(r))throw TypeError("Stringified UUID is invalid");return r}var je=Vt;function kt(e,t,r){e=e||{};var n=e.random||(e.rng||Y)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return je(n)}var J=kt;var K=class{constructor(){this.testers=[];let t=()=>{this.testers.forEach(r=>r())};this.testrunner=t,this.connect(this.testrunner)}release(t,r){let n=this.testers.indexOf(t);this.testers.splice(n,1),this.testers.length==0&&this.disconnect(this.testrunner)}connect(t){}disconnect(t){}},ze=(e,t,r)=>{let n=r.appearThreshold||.4,o=r.conditions,i=r.trigger,s=()=>e.scrollY+e.innerHeight*(1-n)>t.offsetTop&&(o?o(e,t):!0);return new Promise((a,c)=>{if(t==null)c(new Error(`${t} element not found`));else if(s())a();else{let f=R=>{i==null||i.release(R,t),e.removeEventListener("scroll",R)},h=()=>{s()&&(f(h),a())};i&&i.testers.push(h),e.addEventListener("scroll",h)}})},Ve=e=>{var o,i;let t=e.nodeName.toUpperCase(),r=((o=e.getAttribute("type"))==null?void 0:o.toLowerCase())||null,n={};if(t=="SELECT")n={v:e.value};else if(r=="checkbox"){let s=e;n={v:s.value,c:s.checked}}else n={v:e.value},n.vl=(i=n.v)==null?void 0:i.length;return n};var I=class{constructor(t){this.window=t.window,this.option=t.option}send(t){return E(this,null,function*(){let r=new URL(this.option.url);this.option.api_key&&r.searchParams.set("api_key",this.option.api_key);let n={type:"application/json"},o=new Blob([JSON.stringify(t)],n);return this.window.navigator.sendBeacon(r.toString(),o)})}};var C=class{send(t){return E(this,null,function*(){return console.log(JSON.stringify(t)),!0})}};function T(e){return e&&e instanceof Element}var d;(function(e){e.NONE="none",e.DESCENDANT="descendant",e.CHILD="child"})(d||(d={}));var u;(function(e){e.id="id",e.class="class",e.tag="tag",e.attribute="attribute",e.nthchild="nthchild",e.nthoftype="nthoftype"})(u||(u={}));function ke(e,t){return Object.values(e).includes(t)}var qt="CssSelectorGenerator";function w(e="unknown problem",...t){console.warn(`${qt}: ${e}`,...t)}var Ut={selectors:[u.id,u.class,u.tag,u.attribute],includeTag:!1,whitelist:[],blacklist:[],combineWithinSelector:!0,combineBetweenSelectors:!0,root:null,maxCombinations:Number.POSITIVE_INFINITY,maxCandidates:Number.POSITIVE_INFINITY};function Bt(e){return Array.isArray(e)?e.filter(t=>ke(u,t)):[]}function X(e){return e instanceof RegExp}function Gt(e){return["string","function"].includes(typeof e)||X(e)}function qe(e){return Array.isArray(e)?e.filter(Gt):[]}function Yt(e){return e instanceof Node}function Ue(e){let t=[Node.DOCUMENT_NODE,Node.DOCUMENT_FRAGMENT_NODE,Node.ELEMENT_NODE];return Yt(e)&&t.includes(e.nodeType)}function Q(e,t){if(Ue(e))return e.contains(t)||w("element root mismatch","Provided root does not contain the element. This will most likely result in producing a fallback selector using element's real root node. If you plan to use the selector using provided root (e.g. `root.querySelector`), it will nto work as intended."),e;let r=t.getRootNode({composed:!1});return Ue(r)?(r!==document&&w("shadow root inferred","You did not provide a root and the element is a child of Shadow DOM. This will produce a selector using ShadowRoot as a root. If you plan to use the selector using document as a root (e.g. `document.querySelector`), it will not work as intended."),r):t.ownerDocument.querySelector(":root")}function Be(e){return typeof e=="number"?e:Number.POSITIVE_INFINITY}function Ge(e,t={}){let r=Object.assign(Object.assign({},Ut),t);return{selectors:Bt(r.selectors),whitelist:qe(r.whitelist),blacklist:qe(r.blacklist),root:Q(r.root,e),combineWithinSelector:!!r.combineWithinSelector,combineBetweenSelectors:!!r.combineBetweenSelectors,includeTag:!!r.includeTag,maxCombinations:Be(r.maxCombinations),maxCandidates:Be(r.maxCandidates)}}function m(e=[]){let[t=[],...r]=e;return r.length===0?t:r.reduce((n,o)=>n.filter(i=>o.includes(i)),t)}function $(e){return[].concat(...e)}function Jt(e){return e.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".+")}function P(e){let t=e.map(r=>{if(X(r))return n=>r.test(n);if(typeof r=="function")return n=>{let o=r(n);return typeof o!="boolean"?(w("pattern matcher function invalid","Provided pattern matching function does not return boolean. It's result will be ignored.",r),!1):o};if(typeof r=="string"){let n=new RegExp("^"+Jt(r)+"$");return o=>n.test(o)}return w("pattern matcher invalid","Pattern matching only accepts strings, regular expressions and/or functions. This item is invalid and will be ignored.",r),()=>!1});return r=>t.some(n=>n(r))}function L(e,t,r){let n=Array.from(Q(r,e[0]).querySelectorAll(t));return n.length===e.length&&e.every(o=>n.includes(o))}function Z(e,t){t=t??Kt(e);let r=[],n=e;for(;T(n)&&n!==t;)r.push(n),n=n.parentElement;return r}function Ye(e,t){return m(e.map(r=>Z(r,t)))}function Kt(e){return e.ownerDocument.querySelector(":root")}var Xt="",ee=" > ",te=" ",Je={[d.NONE]:{type:d.NONE,value:Xt},[d.DESCENDANT]:{type:d.DESCENDANT,value:ee},[d.CHILD]:{type:d.CHILD,value:te}},j=", ",Ke=new RegExp(["^$","\\s"].join("|")),Xe=new RegExp(["^$"].join("|")),z=[u.nthoftype,u.tag,u.id,u.class,u.attribute,u.nthchild];var Qt=P(["class","id","ng-*"]);function Zt({nodeName:e}){return`[${e}]`}function er({nodeName:e,nodeValue:t}){return`[${e}='${v(t)}']`}function tr({nodeName:e},t){let r=t.tagName.toLowerCase();return["input","option"].includes(r)&&e==="value"?!1:!Qt(e)}function re(e){let t=Array.from(e.attributes).filter(r=>tr(r,e));return[...t.map(Zt),...t.map(er)]}function Qe(e){let t=e.map(re);return m(t)}function ne(e){return(e.getAttribute("class")||"").trim().split(/\s+/).filter(t=>!Xe.test(t)).map(t=>`.${v(t)}`)}function Ze(e){let t=e.map(ne);return m(t)}function oe(e){let t=e.getAttribute("id")||"",r=`#${v(t)}`,n=e.getRootNode({composed:!1});return!Ke.test(t)&&L([e],r,n)?[r]:[]}function et(e){return e.length===0||e.length>1?[]:oe(e[0])}function ie(e){let t=e.parentNode;if(t){let n=Array.from(t.childNodes).filter(T).indexOf(e);if(n>-1)return[`:nth-child(${n+1})`]}return[]}function tt(e){return m(e.map(ie))}function se(e){return[v(e.tagName.toLowerCase())]}function V(e){let t=[...new Set($(e.map(se)))];return t.length===0||t.length>1?[]:[t[0]]}function ae(e){let t=V([e])[0],r=e.parentElement;if(r){let o=Array.from(r.children).filter(i=>i.tagName.toLowerCase()===t).indexOf(e);if(o>-1)return[`${t}:nth-of-type(${o+1})`]}return[]}function rt(e){return m(e.map(ae))}function ue(e=[],{maxResults:t=Number.POSITIVE_INFINITY}={}){let r=[],n=0,o=le(1);for(;o.length<=e.length&&n<t;)n+=1,r.push(o.map(i=>e[i])),o=rr(o,e.length-1);return r}function rr(e=[],t=0){let r=e.length;if(r===0)return[];let n=[...e];n[r-1]+=1;for(let o=r-1;o>=0;o--)if(n[o]>t){if(o===0)return le(r+1);n[o-1]++,n[o]=n[o-1]+1}return n[r-1]>t?le(r+1):n}function le(e=1){return Array.from(Array(e).keys())}function nt(e={}){let t=[];return Object.entries(e).forEach(([r,n])=>{t=n.flatMap(o=>t.length===0?[{[r]:o}]:t.map(i=>Object.assign(Object.assign({},i),{[r]:o})))}),t}var nr=":".charCodeAt(0).toString(16).toUpperCase(),or=/[ !"#$%&'()\[\]{|}<>*+,./;=?@^`~\\]/;function v(e=""){var t,r;return(r=(t=CSS?.escape)===null||t===void 0?void 0:t.call(CSS,e))!==null&&r!==void 0?r:ir(e)}function ir(e=""){return e.split("").map(t=>t===":"?`\\${nr} `:or.test(t)?`\\${t}`:escape(t).replace(/%/g,"\\")).join("")}var sr={tag:V,id:et,class:Ze,attribute:Qe,nthchild:tt,nthoftype:rt},ar={tag:se,id:oe,class:ne,attribute:re,nthchild:ie,nthoftype:ae};function ot(e,t){return ar[t](e)}function lr(e,t){var r;return((r=sr[t])!==null&&r!==void 0?r:()=>[])(e)}function ur(e=[],t,r){return e.filter(n=>r(n)||!t(n))}function cr(e=[],t){return e.sort((r,n)=>{let o=t(r),i=t(n);return o&&!i?-1:!o&&i?1:0})}function fr(e,t,r){let n=pr(e,r),o=gr(n,r),i=$(o);return[...new Set(i)]}function pr(e,t){let{blacklist:r,whitelist:n,combineWithinSelector:o,maxCombinations:i}=t,s=P(r),a=P(n),c=(f,h)=>{let R=lr(e,h),ft=ur(R,s,a),fe=cr(ft,a);return f[h]=o?ue(fe,{maxResults:i}):fe.map(pt=>[pt]),f};return dr(t).reduce(c,{})}function dr(e){let{selectors:t,includeTag:r}=e,n=[].concat(t);return r&&!n.includes("tag")&&n.push("tag"),n}function mr(e){return e.includes(u.tag)||e.includes(u.nthoftype)?[...e]:[...e,u.tag]}function hr(e){let{selectors:t,combineBetweenSelectors:r,includeTag:n,maxCandidates:o}=e,i=r?ue(t,{maxResults:o}):t.map(s=>[s]);return n?i.map(mr):i}function gr(e,t){return hr(t).map(r=>vr(r,e)).filter(r=>r.length>0)}function vr(e,t){let r={};return e.forEach(o=>{let i=t[o];i.length>0&&(r[o]=i)}),nt(r).map(Sr)}function Er(e,t){return t[e]?t[e].join(""):""}function Sr(e={}){let t=[...z];return e[u.tag]&&e[u.nthoftype]&&t.splice(t.indexOf(u.tag),1),t.map(r=>Er(r,e)).join("")}function xr(e,t){return[...e.map(r=>t+te+r),...e.map(r=>t+ee+r)]}function br(e,t){return t===""?e:xr(e,t)}function yr(e,t,r="",n){let o=fr(e,n.root,n),i=br(o,r);for(let s of i)if(L(e,s,n.root))return s;return null}function it(e,t,r="",n){if(e.length===0)return null;let o=[e.length>1?e:[],...Ye(e,t).map(i=>[i])];for(let i of o){let s=yr(i,t,r,n);if(s)return{foundElements:i,selector:s}}return null}function st(e){let t=(Array.isArray(e)?e:[e]).filter(T);return[...new Set(t)]}function Tr(e){return{value:e,include:!1}}function at(e,t,r=d.NONE){let n={};return t.forEach(o=>{Reflect.set(n,o,ot(e,o).map(Tr))}),{element:e,operator:Je[r],selectors:n}}function lt({selectors:e,operator:t}){let r=[...z];e[u.tag]&&e[u.nthoftype]&&(r=r.filter(o=>o!==u.tag));let n="";return r.forEach(o=>{(e[o]||[]).forEach(({value:s,include:a})=>{a&&(n+=s)})}),t.value+n}function wr(e){let r=Z(e).reverse().map(n=>{let o=at(n,[u.nthchild],d.DESCENDANT);return o.selectors.nthchild.forEach(i=>{i.include=!0}),o});return[":root",...r.map(lt)].join("")}function ut(e){return e.map(wr).join(j)}function ce(e,t={}){let r=st(e),n=Ge(r[0],t),o="",i=n.root;function s(){return it(r,i,o,n)}let a=s();for(;a;){let{foundElements:c,selector:f}=a;if(L(r,f,n.root))return f;i=c[0],o=f,a=s()}return r.length>1?r.map(c=>ce(c,n)).join(j):ut(r)}var k=class{constructor(t){this.sequence=0;this.eventEmitter=new ct.default;this.sessionId=0;this.appPrefix="_fe";this.formAvailable=!1;this.window=t.window,(t.sendGtagEvent===void 0||t.sendGtagEvent===!0)&&this.on("form_session_start",N.formSessionStart),t.localstoragePrefix&&(this.appPrefix=t.localstoragePrefix),this.formSelector=t.formSelector||"form",this.httpSenderOption=t.httpSenderOption,this._sender=t.dataSender,this.waitAppearTargetOption=t.waitAppearTargetOption||{}}sender(){return this._sender||(this.httpSenderOption?this._sender=new I({window:this.window,option:this.httpSenderOption}):this._sender=new C),this._sender}dataTransporter(){return this._dataTransporter||(this._dataTransporter=new A(this.sender())),this._dataTransporter}incrementSequence(){return this.sequence++}incrementSessionId(){let t=(0,_.get)(`${this.appPrefix}_sid`)||0;return this.sessionId=t,(0,_.set)(`${this.appPrefix}_sid`,this.sessionId+1),this.sessionId}get uid(){if(!this._uid&&(this._uid=(0,_.get)(`${this.appPrefix}_uid`),!this._uid)){let r=J(),n=Math.round(Math.random()*(r.length>8?r.length-8:0)),o=r.replace(/-/g,"").substring(n,n+8);this._uid=`${o}.${Math.round(Date.now()/1e3)}`,(0,_.set)(`${this.appPrefix}_uid`,this._uid)}return this._uid}emit(t,r){var i;let n=r||{},o=F({e:t,i:this.incrementSequence(),fst:this.formSelector,sid:this.sessionId,uid:this.uid,ts:Date.now()},n);console.debug("form measure event emitted",o),(i=this.dataTransporter())==null||i.push(o),this.eventEmitter.emit(t,o)}on(t,r){this.eventEmitter.on(t,r)}start(){let r=this.window.document.querySelectorAll(this.formSelector);return r.length>0&&(this.formAvailable=!0),this.formAvailable?(this.window.addEventListener("unload",()=>{var n;this.emit("form_session_end"),(n=this.dataTransporter())==null||n.end()}),this.sequence=0,this.incrementSessionId(),r.forEach((n,o)=>{let i=n,s=this.getFormId(i,o);this.emit("form_session_start",this.getFormProps(i,s));let a=c=>{let f=this.sanitaizeFieldProps(this.getFieldProps(c.target));this.emit(c.type,F({fid:s},f))};i.querySelectorAll("input,select,textarea").forEach(c=>{let f=c;f.addEventListener("change",a),f.addEventListener("focus",a)}),i.addEventListener("submit",c=>{this.emit("form_submit",this.getFormProps(i,s))}),ze(this.window,i,this.waitAppearTargetOption).then(()=>{this.emit("form_appear",this.getFormProps(i,s))})}),this.dataTransporter()&&(this.dataTransporter().flashInterval=1e4,this.dataTransporter().start()),!0):!1}getFormId(t,r=0){return t.getAttribute("id")?`form#${t.getAttribute("id")}`:t.getAttribute("name")?`form[name='${t.getAttribute("name")}']`:t.getAttribute("class")?`form.${t.getAttribute("class")}`:t.getAttribute("action")?`form[action='${t.getAttribute("action")}']`:`FORM_INDEX[${r}]`}getFormProps(t,r,n=!0){return{url:this.window.location.href,ua:this.window.navigator.userAgent,referer:this.window.document.referrer,fda:this.getFormDataSanitaized(t),fid:r}}getFormDataSanitaized(t){return this.getFormData(t).map(r=>this.sanitaizeFieldProps(r))}getFormData(t){let r=[];return t==null||t.querySelectorAll("input,select,textarea").forEach(n=>{let o=n,i=this.getFieldProps(o);r.push(i)}),r}getFieldProps(t){var a;let r=((a=t.getAttribute("type"))==null?void 0:a.toLowerCase())||null,n=t.nodeName.toUpperCase(),o=t.getAttribute("name")||ce(t),i=Ve(t);return F({n:o,t:r,nn:n},i)}sanitaizeFieldProps(t){return t.nn!="SELECT"&&t.t!="radio"&&t.t!="checkbox"&&delete t.v,t}};})();
